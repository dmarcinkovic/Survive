cmake_minimum_required(VERSION 3.15)
project(Survive)

set(CMAKE_CXX_STANDARD 20)

set(OpenGlLinkers -lGLU -lGL -lGLEW -lopenal)
set(TBB_LIBRARY -ltbb)

find_package(PkgConfig REQUIRED)
pkg_search_module(GLFW REQUIRED glfw3)
find_package(GLEW REQUIRED STATIC)
find_package(box2d REQUIRED)

add_executable(Survive main.cpp ecs/entt.hpp editor/imgui/imgui.cpp editor/imgui/backends/imgui_impl_glfw.cpp editor/imgui/backends/imgui_impl_opengl3.cpp editor/imgui/imgui.cpp editor/imgui/imgui_widgets.cpp editor/imgui/imgui_draw.cpp editor/imgui/imgui_demo.cpp editor/imgui/imgui_tables.cpp editor/editor/Editor.cpp editor/editor/Editor.h editor/tools/fileChooser/FileChooser.cpp editor/tools/fileChooser/FileChooser.h engine/core/events/EventHandler.cpp engine/core/events/EventHandler.h engine/components/MaterialComponent.h engine/components/Render3DComponent.h engine/components/Transform3DComponent.h engine/components/SpriteComponent.h engine/components/BloomComponent.h engine/components/ReflectionComponent.h engine/components/RefractionComponent.h engine/components/Components.h engine/components/AnimationComponent.h engine/components/TexturedComponent.h engine/components/OutlineComponent.h engine/components/MoveComponent.h engine/components/SoundComponent.h engine/components/ShadowComponent.h engine/core/texture/stb_image.h engine/core/texture/stb_image.cpp engine/core/display/Display.cpp engine/core/display/Display.h engine/core/renderer/Loader.cpp engine/core/renderer/Loader.h engine/core/shader/Shader.cpp engine/core/shader/Shader.h engine/core/texture/Texture.cpp engine/core/texture/Texture.h engine/audio/Source.cpp engine/audio/Source.h engine/audio/AudioMaster.cpp engine/audio/AudioMaster.h engine/core/renderer/Renderer2D.cpp engine/core/renderer/Renderer2D.h engine/entities/entity/Entity.cpp engine/entities/entity/Entity.h engine/entities/gui/GuiShader.cpp engine/entities/gui/GuiShader.h engine/entities/gui/GuiRenderer.cpp engine/entities/gui/GuiRenderer.h engine/core/math/Maths.cpp engine/core/math/Maths.h engine/entities/text/Text.cpp engine/entities/text/Text.h engine/entities/text/TextShader.cpp engine/entities/text/TextShader.h engine/entities/text/TextRenderer.cpp engine/entities/text/TextRenderer.h engine/entities/text/Character.cpp engine/entities/text/Character.h engine/entities/text/font/Font.cpp engine/entities/text/font/Font.h engine/core/util/Util.cpp engine/core/util/Util.h engine/entities/ui/button/ButtonShader.cpp engine/entities/ui/button/ButtonShader.h engine/entities/ui/button/Button.cpp engine/entities/ui/button/Button.h engine/entities/ui/button/ButtonRenderer.cpp engine/entities/ui/button/ButtonRenderer.h engine/core/parser/ObjParser.cpp engine/core/parser/ObjParser.h engine/entities/objects/ObjectShader.cpp engine/entities/objects/ObjectShader.h engine/scene/camera/Camera.cpp engine/scene/camera/Camera.h engine/entities/objects/ObjectRenderer.cpp engine/entities/objects/ObjectRenderer.h engine/scene/light/Light.cpp engine/scene/light/Light.h engine/core/renderer/Renderer.cpp engine/core/renderer/Renderer.h engine/core/fbo/FrameBuffer.cpp engine/core/fbo/FrameBuffer.h engine/scene/shadowMapping/ShadowShader.cpp engine/scene/shadowMapping/ShadowShader.h engine/scene/shadowMapping/ShadowRenderer.cpp engine/scene/shadowMapping/ShadowRenderer.h engine/entities/terrain/TerrainShader.cpp engine/entities/terrain/TerrainShader.h engine/entities/terrain/TerrainRenderer.cpp engine/entities/terrain/TerrainRenderer.h engine/core/texture/TexturedModel.cpp engine/core/texture/TexturedModel.h engine/constant/Constants.h engine/core/parser/DaeParser.cpp engine/core/parser/DaeParser.h engine/animations/joints/Joint.cpp engine/animations/joints/Joint.h engine/animations/renderer/AnimationRenderer.cpp engine/animations/renderer/AnimationRenderer.h engine/animations/renderer/AnimationShader.cpp engine/animations/renderer/AnimationShader.h engine/core/math/Quaternion.cpp engine/core/math/Quaternion.h engine/animations/joints/JointTransform.cpp engine/animations/joints/JointTransform.h engine/entities/sprites/SpritesShader.cpp engine/entities/sprites/SpritesShader.h engine/entities/sprites/SpritesRenderer.cpp engine/entities/sprites/SpritesRenderer.h engine/components/SpriteSheetComponent.h engine/animations/animation/KeyFrame.cpp engine/animations/animation/KeyFrame.h engine/animations/animation/Animation.cpp engine/animations/animation/Animation.h engine/animations/animation/Animator.cpp engine/animations/animation/Animator.h engine/entities/sky/SkyShader.cpp engine/entities/sky/SkyShader.h engine/entities/sky/SkyRenderer.cpp engine/entities/sky/SkyRenderer.h engine/scene/gaussianBlur/horizontalBlur/HorizontalBlurRenderer.cpp engine/scene/gaussianBlur/horizontalBlur/HorizontalBlurRenderer.h engine/scene/gaussianBlur/verticalBlur/VerticalBlurRenderer.cpp engine/scene/gaussianBlur/verticalBlur/VerticalBlurRenderer.h engine/scene/gaussianBlur/horizontalBlur/HorizontalBlurShader.cpp engine/scene/gaussianBlur/horizontalBlur/HorizontalBlurShader.h engine/scene/gaussianBlur/verticalBlur/VerticalBlurShader.cpp engine/scene/gaussianBlur/verticalBlur/VerticalBlurShader.h engine/scene/gaussianBlur/BlurRenderer.cpp engine/scene/gaussianBlur/BlurRenderer.h engine/scene/gaussianBlur/BloomRenderer.h engine/scene/gaussianBlur/BloomRenderer.cpp engine/entities/terrain/TerrainGenerator.cpp engine/entities/terrain/TerrainGenerator.h engine/entities/water/WaterRenderer.cpp engine/entities/water/WaterRenderer.h engine/entities/water/WaterShader.cpp engine/entities/water/WaterShader.h engine/entities/water/WaterFbo.h engine/entities/water/WaterFbo.cpp engine/components/Render3DComponent.h engine/components/Transform3DComponent.h engine/entities/sprites/SpriteUpdate.cpp engine/entities/sprites/SpriteUpdate.h engine/components/SpriteComponent.h engine/components/BloomComponent.h engine/components/ReflectionComponent.h engine/components/RefractionComponent.h engine/components/Components.h engine/components/AnimationComponent.h engine/components/TexturedComponent.h engine/components/OutlineComponent.h engine/components/MoveComponent.h engine/components/SoundComponent.h engine/components/ShadowComponent.h engine/components/TagComponent.h editor/editor/EntityManager.cpp editor/editor/EntityManager.h editor/tools/components/ComponentUtil.h editor/tools/components/ComponentTemplate.h editor/tools/util/EditorUtil.cpp editor/tools/util/EditorUtil.h editor/ImGuizmo/ImGuizmo.h editor/ImGuizmo/ImGuizmo.cpp engine/components/Render2DComponent.h engine/scene/sceneLoader/SceneSerializer.cpp engine/scene/sceneLoader/SceneSerializer.h engine/scene/sceneLoader/ComponentLoader.h engine/scene/sceneLoader/ComponentLoader.cpp engine/core/events/Key.h editor/tools/fileChooser/ConfirmWindow.cpp editor/tools/fileChooser/ConfirmWindow.h engine/audio/AudioSystem.cpp engine/audio/AudioSystem.h editor/window/SkyboxWindow.cpp editor/window/SkyboxWindow.h engine/scene/sceneLoader/ComponentSerializer.cpp engine/scene/sceneLoader/ComponentSerializer.h editor/tools/gizmo/Gizmos.cpp editor/tools/gizmo/Gizmos.h engine/animations/animation/AnimationSystem.cpp engine/animations/animation/AnimationSystem.h editor/window/ContentBrowser.cpp editor/window/ContentBrowser.h editor/tools/util/FileUtil.cpp editor/tools/util/FileUtil.h editor/window/DirectoryTree.cpp editor/window/DirectoryTree.h engine/components/TextComponent.h editor/window/CameraWindow.cpp editor/window/CameraWindow.h engine/components/RigidBody2DComponent.h engine/physics/PhysicSystem.cpp engine/physics/PhysicSystem.h engine/components/CircleCollider2DComponent.h engine/components/BoxCollider2DComponent.h engine/components/PolygonCollider2DComponent.h engine/components/EdgeCollider2DComponent.h engine/core/application/Application.cpp engine/core/application/Application.h engine/system/System.cpp engine/system/System.h editor/editor/Scene.cpp editor/editor/Scene.h editor/editor/StatusBar.cpp editor/editor/StatusBar.h editor/editor/Menu.cpp editor/editor/Menu.h editor/window/PropertyWindow.h engine/entities/text/font/FontJsonParser.cpp engine/entities/text/font/FontJsonParser.h engine/entities/text/font/FontFntParser.cpp engine/entities/text/font/FontFntParser.h editor/tools/fileChooser/SaveDialog.cpp editor/tools/fileChooser/SaveDialog.h editor/tools/fileChooser/OpenDialog.cpp editor/tools/fileChooser/OpenDialog.h engine/core/parser/Vertex.cpp engine/core/parser/Vertex.h engine/components/RigidBody3DComponent.h engine/components/BoxCollider3DComponent.h engine/components/SphereCollider3DComponent.h engine/components/Collider3DComponent.h engine/components/CapsuleCollider3DComponent.h engine/entities/wireframe/WireframeShader.cpp engine/entities/wireframe/WireframeShader.h engine/entities/wireframe/WireframeRenderer.cpp engine/entities/wireframe/WireframeRenderer.h engine/components/ScriptComponent.h engine/core/log/Log.cpp engine/core/log/Log.h engine/scripting/ObjectBehaviour.cpp engine/scripting/ObjectBehaviour.h engine/scripting/ScriptingSystem.cpp engine/scripting/ScriptingSystem.h engine/physics/ContactListener.cpp engine/physics/ContactListener.h editor/tools/components/templates/ReflectionComponentTemplate.h editor/tools/components/templates/Transform3DComponentTemplate.h editor/tools/components/templates/Render3DComponentTemplate.h editor/tools/components/templates/MaterialComponentTemplate.h editor/tools/components/templates/ShadowComponentTemplate.h editor/tools/components/templates/BloomComponentTemplate.h editor/tools/components/templates/RefractionComponentTemplate.h editor/tools/components/templates/Render2DComponentTemplate.h editor/tools/components/templates/SoundComponentTemplate.h editor/tools/components/templates/SpriteComponentTemplate.h editor/tools/components/templates/TextComponentTemplate.h editor/tools/components/templates/SpriteSheetComponentTemplate.h editor/tools/components/templates/Collider2DComponentTemplate.h editor/tools/components/templates/BoxCollider2DComponentTemplate.h editor/tools/components/templates/CircleCollider2DComponentTemplate.h editor/tools/components/templates/EdgeCollider2DComponentTemplate.h editor/tools/components/templates/PolygonCollider2DComponentTemplate.h editor/tools/components/templates/RigidBody2DComponentTemplate.h editor/tools/components/templates/Joint2DComponentTemplate.h editor/tools/components/templates/HingeJoint2DComponentTemplate.h editor/tools/components/templates/DistanceJoint2DComponentTemplate.h editor/tools/components/templates/ScriptComponentTemplate.h editor/tools/components/ComponentTemplates.h editor/editor/EditorEventHandler.cpp editor/editor/EditorEventHandler.h engine/components/ConvexMeshCollider3DComponent.h  engine/physics/reactphysics3d/src/body/CollisionBody.cpp engine/physics/reactphysics3d/src/body/RigidBody.cpp engine/physics/reactphysics3d/src/collision/broadphase/DynamicAABBTree.cpp engine/physics/reactphysics3d/src/collision/narrowphase/CollisionDispatch.cpp engine/physics/reactphysics3d/src/collision/narrowphase/GJK/VoronoiSimplex.cpp engine/physics/reactphysics3d/src/collision/narrowphase/GJK/GJKAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/SAT/SATAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/SphereVsSphereAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/CapsuleVsCapsuleAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/SphereVsCapsuleAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/SphereVsConvexPolyhedronAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/CapsuleVsConvexPolyhedronAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/ConvexPolyhedronVsConvexPolyhedronAlgorithm.cpp engine/physics/reactphysics3d/src/collision/narrowphase/NarrowPhaseInput.cpp engine/physics/reactphysics3d/src/collision/narrowphase/NarrowPhaseInfoBatch.cpp engine/physics/reactphysics3d/src/collision/shapes/AABB.cpp engine/physics/reactphysics3d/src/collision/shapes/ConvexShape.cpp engine/physics/reactphysics3d/src/collision/shapes/ConvexPolyhedronShape.cpp engine/physics/reactphysics3d/src/collision/shapes/ConcaveShape.cpp engine/physics/reactphysics3d/src/collision/shapes/BoxShape.cpp engine/physics/reactphysics3d/src/collision/shapes/CapsuleShape.cpp engine/physics/reactphysics3d/src/collision/shapes/CollisionShape.cpp engine/physics/reactphysics3d/src/collision/shapes/ConvexMeshShape.cpp engine/physics/reactphysics3d/src/collision/shapes/SphereShape.cpp engine/physics/reactphysics3d/src/collision/shapes/TriangleShape.cpp engine/physics/reactphysics3d/src/collision/shapes/ConcaveMeshShape.cpp engine/physics/reactphysics3d/src/collision/shapes/HeightFieldShape.cpp engine/physics/reactphysics3d/src/collision/RaycastInfo.cpp engine/physics/reactphysics3d/src/collision/Collider.cpp engine/physics/reactphysics3d/src/collision/TriangleVertexArray.cpp engine/physics/reactphysics3d/src/collision/PolygonVertexArray.cpp engine/physics/reactphysics3d/src/collision/TriangleMesh.cpp engine/physics/reactphysics3d/src/collision/PolyhedronMesh.cpp engine/physics/reactphysics3d/src/collision/HalfEdgeStructure.cpp engine/physics/reactphysics3d/src/collision/ContactManifold.cpp engine/physics/reactphysics3d/src/constraint/BallAndSocketJoint.cpp engine/physics/reactphysics3d/src/constraint/ContactPoint.cpp engine/physics/reactphysics3d/src/constraint/FixedJoint.cpp engine/physics/reactphysics3d/src/constraint/HingeJoint.cpp engine/physics/reactphysics3d/src/constraint/Joint.cpp engine/physics/reactphysics3d/src/constraint/SliderJoint.cpp engine/physics/reactphysics3d/src/engine/PhysicsCommon.cpp engine/physics/reactphysics3d/src/systems/ConstraintSolverSystem.cpp engine/physics/reactphysics3d/src/systems/ContactSolverSystem.cpp engine/physics/reactphysics3d/src/systems/DynamicsSystem.cpp engine/physics/reactphysics3d/src/systems/CollisionDetectionSystem.cpp engine/physics/reactphysics3d/src/systems/SolveBallAndSocketJointSystem.cpp engine/physics/reactphysics3d/src/systems/SolveFixedJointSystem.cpp engine/physics/reactphysics3d/src/systems/SolveHingeJointSystem.cpp engine/physics/reactphysics3d/src/systems/SolveSliderJointSystem.cpp engine/physics/reactphysics3d/src/engine/PhysicsWorld.cpp engine/physics/reactphysics3d/src/engine/Island.cpp engine/physics/reactphysics3d/src/engine/Material.cpp engine/physics/reactphysics3d/src/engine/OverlappingPairs.cpp engine/physics/reactphysics3d/src/engine/Entity.cpp engine/physics/reactphysics3d/src/engine/EntityManager.cpp engine/physics/reactphysics3d/src/systems/BroadPhaseSystem.cpp engine/physics/reactphysics3d/src/components/Components.cpp engine/physics/reactphysics3d/src/components/CollisionBodyComponents.cpp engine/physics/reactphysics3d/src/components/RigidBodyComponents.cpp engine/physics/reactphysics3d/src/components/TransformComponents.cpp engine/physics/reactphysics3d/src/components/ColliderComponents.cpp engine/physics/reactphysics3d/src/components/JointComponents.cpp engine/physics/reactphysics3d/src/components/BallAndSocketJointComponents.cpp engine/physics/reactphysics3d/src/components/FixedJointComponents.cpp engine/physics/reactphysics3d/src/components/HingeJointComponents.cpp engine/physics/reactphysics3d/src/components/SliderJointComponents.cpp engine/physics/reactphysics3d/src/collision/CollisionCallback.cpp engine/physics/reactphysics3d/src/collision/OverlapCallback.cpp engine/physics/reactphysics3d/src/mathematics/Matrix2x2.cpp engine/physics/reactphysics3d/src/mathematics/Matrix3x3.cpp engine/physics/reactphysics3d/src/mathematics/Quaternion.cpp engine/physics/reactphysics3d/src/mathematics/Transform.cpp engine/physics/reactphysics3d/src/mathematics/Vector2.cpp engine/physics/reactphysics3d/src/mathematics/Vector3.cpp engine/physics/reactphysics3d/src/memory/PoolAllocator.cpp engine/physics/reactphysics3d/src/memory/SingleFrameAllocator.cpp engine/physics/reactphysics3d/src/memory/HeapAllocator.cpp engine/physics/reactphysics3d/src/memory/MemoryManager.cpp engine/physics/reactphysics3d/src/utils/Profiler.cpp engine/physics/reactphysics3d/src/utils/DefaultLogger.cpp engine/physics/reactphysics3d/src/utils/DebugRenderer.cpp editor/tools/components/templates/RigidBody3DComponentTemplate.h editor/tools/components/templates/BoxCollider3DComponentTemplate.h editor/tools/components/templates/CapsuleCollider3DComponentTemplate.h editor/tools/components/templates/SphereCollider3DComponentTemplate.h editor/tools/components/templates/Collider3DComponentTemplate.h editor/tools/gizmo/physics/PhysicsGizmosBase.cpp editor/tools/gizmo/physics/PhysicsGizmosBase.h editor/tools/gizmo/physics/joints/JointGizmos.cpp editor/tools/gizmo/physics/joints/JointGizmos.h engine/core/renderer/Renderer3D.cpp editor/tools/gizmo/physics/PhysicsGizmo.cpp editor/tools/gizmo/physics/PhysicsGizmo.h editor/tools/gizmo/physics/joints/DistanceJointGizmos.cpp editor/tools/gizmo/physics/joints/DistanceJointGizmos.h editor/tools/gizmo/physics/joints/HingeJointGizmos.cpp editor/tools/gizmo/physics/joints/HingeJointGizmos.h editor/tools/gizmo/physics/colliders/BoxGizmos.cpp editor/tools/gizmo/physics/colliders/BoxGizmos.h editor/tools/gizmo/physics/colliders/CircleGizmos.cpp editor/tools/gizmo/physics/colliders/CircleGizmos.h editor/tools/gizmo/physics/colliders/EdgeGizmos.cpp editor/tools/gizmo/physics/colliders/EdgeGizmos.h editor/tools/gizmo/physics/colliders/PolygonGizmos.cpp editor/tools/gizmo/physics/colliders/PolygonGizmos.h engine/scene/outline/OutlineRenderer.cpp engine/scene/outline/OutlineRenderer.h engine/scene/outline/OutlineShader.cpp engine/scene/outline/OutlineShader.h editor/editor/LogEditor.h editor/editor/LogEditor.cpp editor/tools/mousePicking/MousePicking.cpp editor/tools/mousePicking/MousePicking.h editor/tools/mousePicking/MousePickingShader.cpp editor/tools/mousePicking/MousePickingShader.h editor/tools/components/templates/ConvexMeshCollider3DComponentTemplate.h engine/components/HingeJoint3DComponent.h editor/tools/components/templates/HingeJoint3DComponentTemplate.h)

include_directories(ecs/ editor/ImGuizmo editor/imgui editor/imgui/backends editor/editor editor/tools/fileChooser editor/tools/components editor/tools/util engine/animations/animation engine/animations/joints engine/animations/renderer engine/audio engine/components engine/constant engine/core/renderer engine/core/display engine/core/fbo engine/core/math engine/core/parser engine/core/shader engine/core/texture engine/core/util engine/editor/mousePicking engine/editor/outline engine/entities/entity engine/entities/gui engine/entities/objects engine/entities/sky engine/entities/sprites engine/entities/text engine/entities/ui engine/entities/terrain engine/entities/water engine/physics engine/scene/camera engine/scene/light engine/scene/shadowMapping engine/scene/gaussianBlur engine/scene/particles engine/core/events engine/scene/sceneLoader editor/window editor/tools/gizmo engine/core/application editor/tools/gizmo/physics engine/system engine/entities/text/font engine/physics/reactphysics3d/include engine/entities/wireframe engine/core/log engine/scripting editor/tools/components/templates editor/tools/mousePicking engine/scene/outline engine/entities/ui/button editor/tools/gizmo/physics/joints editor/tools/gizmo/physics/colliders)

target_link_libraries(Survive ${OpenGlLinkers})

include_directories(${GLFW_INCLUDE_DIRS})
include_directories(${GLEW_INCLUDE_DIRS})

target_link_libraries(Survive box2d)
target_link_libraries(Survive ${GLFW_LIBRARIES} ${OPENGL_LIBRARIES} ${GLFW3_LIBRARY} ${GLEW_LIBRARY} ${TBB_LIBRARY} ${CMAKE_DL_LIBS})

install(DIRECTORY ${CMAKE_SOURCE_DIR}/engine/core/shader/sources DESTINATION engine/core/shader)
install(DIRECTORY ${CMAKE_SOURCE_DIR}/assets DESTINATION .)
install(FILES ${CMAKE_SOURCE_DIR}/imgui.ini DESTINATION .)
install(TARGETS ${PROJECT_NAME} RUNTIME DESTINATION)